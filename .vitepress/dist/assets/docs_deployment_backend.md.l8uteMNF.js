import{_ as s,c as a,o as t,af as e,ag as l,ah as n,ai as r,aj as h,ak as p,al as o}from"./chunks/framework.DSZV70p2.js";const m=JSON.parse('{"title":"后端部署","description":"","frontmatter":{},"headers":[],"relativePath":"docs/deployment/backend.md","filePath":"docs/deployment/backend.md"}'),k={name:"docs/deployment/backend.md"};function d(g,i,c,b,u,y){return t(),a("div",null,[...i[0]||(i[0]=[e(`<h1 id="后端部署" tabindex="-1">后端部署 <a class="header-anchor" href="#后端部署" aria-label="Permalink to “后端部署”">​</a></h1><p>友链朋友圈 (fcircle) 的后端负责 <strong>采集友链文章、生成数据 API</strong>，供前端调用。<br> 目前支持两种部署方式：</p><ol><li><strong>GitHub Action + Vercel（推荐）</strong> —— 无服务器托管，免运维</li><li><strong>自托管（Server 部署）</strong> —— 部署在自己的服务器，稳定性更高</li></ol><h2 id="🚀-github-vercel-部署-推荐" tabindex="-1">🚀 GitHub + Vercel 部署（推荐） <a class="header-anchor" href="#🚀-github-vercel-部署-推荐" aria-label="Permalink to “🚀 GitHub + Vercel 部署（推荐）”">​</a></h2><p>这是最简便的部署方式，利用 GitHub Action 自动采集友链数据，并托管在 Vercel 上。</p><h3 id="部署步骤" tabindex="-1">部署步骤 <a class="header-anchor" href="#部署步骤" aria-label="Permalink to “部署步骤”">​</a></h3><ol><li><p><strong>Fork 仓库</strong><br> 打开项目仓库 <a href="https://github.com/Rock-Candy-Tea/hexo-circle-of-friends" target="_blank" rel="noreferrer">hexo-circle-of-friends</a>，点击右上角 <strong>Fork</strong>。<br> 下文称此仓库为「你的仓库」。</p></li><li><p><strong>修改配置文件</strong><br> 编辑项目根目录下的 <code>fc_settings.yaml</code>，修改友链页面地址和主题：</p><div class="language-yaml"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">LINK</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  - { </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">link</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://www.yyyzyyyz.cn/link/&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">theme</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;butterfly&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }</span></span></code></pre></div></li></ol><ul><li><code>link</code>：替换为你博客的友链页地址</li><li><code>theme</code>：选择对应的主题（如 butterfly、matery 等）</li></ul><ol start="3"><li><p><strong>配置 GitHub Action 权限</strong> 打开「你的仓库」 → <strong>Settings</strong> → <strong>Actions → General</strong>， 在 <strong>Workflow permissions</strong> 中选择 <strong>Read and write permissions</strong>。</p><p><img src="`+l+'" alt="GitHub Actions Permissions"></p></li><li><p><strong>启用 GitHub Action</strong></p><ul><li>点击仓库菜单 <strong>Actions</strong> → 启用工作流</li></ul><p><img src="'+n+'" alt="GitHub Actions Run"></p><ul><li><p>找到 <code>update-friends-posts</code>，点击 <strong>Run workflow</strong> 手动运行一次</p><p><img src="'+r+'" alt="GitHub Actions Run"></p><p><img src="'+h+'" alt="GitHub Actions Run"></p></li><li><p>等待完成后，你的仓库将生成 <code>data.db</code></p></li></ul></li><li><p><strong>部署到 Vercel</strong></p><ul><li><p>注册并登录 <a href="https://vercel.com" target="_blank" rel="noreferrer">Vercel</a>，绑定 GitHub 账号</p></li><li><p>点击 <strong>New Project</strong> → 导入「你的仓库」</p><p><img src="'+p+'" alt="Vercel Import"></p></li><li><p>点击 <strong>Deploy</strong>，等待完成</p></li></ul><p>部署完成后，在项目 <strong>Domains</strong> 中找到地址，例如：</p><div class="language-txt"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>https://hexo-friendcircle4-api.vercel.app</span></span></code></pre></div><p>在地址后拼接 <code>/all</code>，例如：</p><div class="language-txt"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>https://hexo-friendcircle4-api.vercel.app/all</span></span></code></pre></div><p>如果返回数据，说明后端部署成功 🎉 这个地址就是前端所需的 API 地址。</p><p><img src="'+o+`" alt="Vercel Deploy"></p><div class="warning custom-block"><p class="custom-block-title">注意</p><p>由于 Vercel 在部分地区被墙，推荐绑定自定义域名以确保访问稳定。</p></div></li></ol><hr><h2 id="🛠️-自托管部署" tabindex="-1">🛠️ 自托管部署 <a class="header-anchor" href="#🛠️-自托管部署" aria-label="Permalink to “🛠️ 自托管部署”">​</a></h2><p>如果你有自己的服务器，可以选择自托管，掌握所有数据，避免托管服务不稳定。</p><h3 id="部署步骤-1" tabindex="-1">部署步骤 <a class="header-anchor" href="#部署步骤-1" aria-label="Permalink to “部署步骤”">​</a></h3><ol><li><p><strong>克隆项目</strong></p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> clone</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://github.com/Rock-Candy-Tea/hexo-circle-of-friends.git</span></span></code></pre></div></li><li><p><strong>修改配置</strong></p><p>编辑 <code>fc_settings.yaml</code> 文件，和 GitHub Action 部署相同：</p><div class="language-yaml"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">LINK</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  - { </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">link</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://www.yyyzyyyz.cn/link/&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">theme</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;butterfly&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }</span></span></code></pre></div></li><li><p><strong>下载二进制文件</strong></p><p>前往 <a href="https://github.com/Rock-Candy-Tea/hexo-circle-of-friends/releases" target="_blank" rel="noreferrer">Releases</a> 下载对应平台的二进制文件，例如 Linux：</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">wget</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://github.com/Rock-Candy-Tea/hexo-circle-of-friends/releases/download/v6.0.3/linux-x86_64-unknown-linux-musl.zip</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">unzip</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> linux-x86_64-unknown-linux-musl.zip</span></span></code></pre></div></li><li><p><strong>运行服务</strong></p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">chmod</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> +x</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> start.sh</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> &amp;&amp; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">./start.sh</span></span></code></pre></div></li><li><p><strong>测试 API</strong></p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">curl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 127.0.0.1:8000/all</span></span></code></pre></div><p>如果返回数据，说明后端运行成功。 你可以通过反向代理将其映射到网站域名的其他路径。</p></li><li><p><strong>开放端口</strong></p><p>默认端口为 <strong>8000</strong>，请在防火墙或服务器面板中放行。 部署完成后即可通过 <code>http://域名:8000/all</code> 访问。</p></li></ol><h2 id="📦-数据库说明" tabindex="-1">📦 数据库说明 <a class="header-anchor" href="#📦-数据库说明" aria-label="Permalink to “📦 数据库说明”">​</a></h2><ul><li>默认数据库为 <strong>SQLite</strong>，无需额外配置，足以满足大多数使用场景</li><li>也支持 <strong>MySQL / MongoDB</strong>，请参考 <a href="/docs/configuration.html">配置项说明</a></li></ul><hr><h2 id="📖-更多" tabindex="-1">📖 更多 <a class="header-anchor" href="#📖-更多" aria-label="Permalink to “📖 更多”">​</a></h2><ul><li>如何适配博客友链页面？ → 查看 <a href="/docs/advanced.html">进阶攻略</a></li><li>如何更新版本？ → 查看 <a href="/docs/changelog.html">版本更新</a></li></ul><hr><p><em>Last Updated: 2025-08-31</em></p>`,21)])])}const E=s(k,[["render",d]]);export{m as __pageData,E as default};
